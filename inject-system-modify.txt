 function lineinfile() { regexp=${1//\//\\/} ; line=${2//\//\\/} ; sed -i -e '/.*'"${regexp}"'.*/{s//'"${line}"'/;:a;n;ba;q}' -e '$a'"${line}" "$3" ; }
 [ ! -e .bashrc.orig ] && cp .bashrc .bashrc.orig
 lineinfile 'HISTSIZE=' 'HISTSIZE=' .bashrc
 lineinfile 'HISTFILESIZE=' 'HISTFILESIZE=10000' .bashrc
 lineinfile 'HISTTIMEFORMAT=' 'HISTTIMEFORMAT="%F %T "' .bashrc
 [ "$(id -u)" -eq 0 -a "$(logname)" != "${USER}" ] && lineinfile 'alias git=' 'alias git="echo Do not git as root."' .bashrc
 cat .bashrc
